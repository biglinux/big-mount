#!/bin/bash

# Verifica se existe um arquivo indicando para não montar todas as partições
if [ -e "/etc/bigmountall-no" ]; then
  exit
fi

# Cria o diretório /media se não existir
mkdir -p /media

# Monta as partições não swap
for device in $(lsblk -o NAME,TYPE | grep 'disk\|part' | awk '{print $1}'); do
  # Ignora dispositivos swap
  if [[ $device == *"swap"* ]]; then
    continue
  fi

  # Confere se o dispositivo já está montado
  if grep -qs "/dev/$device" /proc/mounts; then
    continue
  fi

  # Monta a partição
  mount "/dev/$device" "/media/$device"
done
